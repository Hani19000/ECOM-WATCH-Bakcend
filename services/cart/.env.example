# ================================================================
# CART-SERVICE — Variables d'environnement
# Copier ce fichier en .env et remplir les valeurs avant démarrage.
# Ne jamais committer le fichier .env en version control.
# ================================================================

# ── Serveur ────────────────────────────────────────────────────────────────────
PORT=3006
NODE_ENV=development

# ── PostgreSQL (Neon) ──────────────────────────────────────────────────────────
# Utiliser l'URL de connexion pooler Neon (rôle cart_user)
DATABASE_URL=postgresql://cart_user:CHANGE_ME_cart_password@your-neon-host/neondb?sslmode=require

# ── Redis (Upstash) ────────────────────────────────────────────────────────────
REDIS_URL=rediss://default:your-upstash-token@your-upstash-host:6380

# ── JWT (partagé avec auth-service) ────────────────────────────────────────────
# Doit être identique à la valeur du auth-service
JWT_ACCESS_SECRET=your-jwt-access-secret
JWT_ACCESS_EXPIRY=15m

# ── URLs des services ──────────────────────────────────────────────────────────
CLIENT_URL=http://localhost:5173
# URL du monolith pour les appels /internal/inventory et /internal/products
MONOLITH_URL=http://localhost:3001

# ── Secrets inter-services ─────────────────────────────────────────────────────
# Secret utilisé pour les appels SORTANTS vers le monolith (inventory, products)
# Doit correspondre au secret attendu par l'internal.middleware du monolith
INTERNAL_CART_SECRET=your-cart-internal-secret

# Secret pour valider les appels ENTRANTS depuis l'order-service
# Doit correspondre à INTERNAL_CART_SECRET côté order-service
INTERNAL_ORDER_SECRET=your-order-internal-secret

# Secret pour valider les appels ENTRANTS depuis l'auth-service
# Doit correspondre à INTERNAL_CART_SECRET côté auth-service
INTERNAL_AUTH_SECRET=your-auth-internal-secret

# ── Rate Limiting ──────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
INTERNAL_HTTP_TIMEOUT_MS=5000

# ── CORS ───────────────────────────────────────────────────────────────────────
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ── Nettoyage des paniers (cron) ───────────────────────────────────────────────
# Nombre de jours d'inactivité avant suppression d'un panier guest
CART_GUEST_EXPIRATION_DAYS=30
# Nombre de jours d'inactivité avant suppression d'un panier utilisateur
CART_USER_EXPIRATION_DAYS=90

# ── Sentry (obligatoire en production) ────────────────────────────────────────
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=1.0
